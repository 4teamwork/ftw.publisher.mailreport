Use the testbrowser for testing the configuration.

Create a browser:
    >>> from Products.Five.testbrowser import Browser
    >>> browser = Browser()
    >>> portal_url = self.portal.absolute_url()

Login as admin:
    >>> from Products.PloneTestCase.setup import portal_owner, default_password
    >>> browser.open(portal_url + '/login')
    >>> browser.getControl(name='__ac_name').value = portal_owner
    >>> browser.getControl(name='__ac_password').value = default_password
    >>> browser.getControl(name='submit').click()
    >>> 'logged in' in browser.contents
    True

The notifier configuration url
    >>> url = portal_url + '/@@publisher-notification-config'

Go to the publisher configuration and check the viewlet with the link:
    >>> main_config_url = portal_url + '/@@publisher-config'
    >>> browser.open(main_config_url)
    >>> browser.url == main_config_url
    True
    >>> 'Notifier configuration' in browser.contents
    True
    >>> browser.getLink(url=url).click()
    >>> browser.url == url
    True

Go to the configuration view:
    >>> browser.open(url)
    >>> browser.url == url
    True

Fill the form:
    >>> browser.getControl(name='form.enabled').value
    False
    >>> browser.getControl(name='form.enabled').value = True
    >>> browser.getControl(name='form.detailed_report').value
    False
    >>> browser.getControl(name='form.detailed_report').value = True
    >>> browser.getControl(name='form.interval').value
    ['daily']
    >>> browser.getControl(name='form.interval').value = ('weekly',)
    >>> browser.getControl(name='form.receivers').value
    ''
    >>> browser.getControl(name='form.receivers').value = 'my@test.local'
    >>> browser.getControl(name='form.actions.button_save').click()

We are still at the same page, changes were stored:
    >>> browser.url == url
    True
    >>> 'Updated on' in browser.contents
    True

Reload the page:
    >>> browser.open(url)
    >>> browser.url == url
    True

Check the form fields:
    >>> browser.getControl(name='form.enabled').value
    True
    >>> browser.getControl(name='form.detailed_report').value
    True
    >>> browser.getControl(name='form.interval').value
    ['weekly']
    >>> browser.getControl(name='form.receivers').value
    'my@test.local'

The receivers are validated (valid email addresses required):
    >>> browser.getControl(name='form.receivers').value = 'bad value'
    >>> browser.getControl(name='form.actions.button_save').click()
    >>> browser.url == url
    True
    >>> 'At least one of the defined addresses are not valid.' in browser.contents
    True

The changes should not be saved when a error occured. So lets reload
and check:
    >>> browser.open(url)
    >>> browser.getControl(name='form.receivers').value == 'my@test.local'
    True
